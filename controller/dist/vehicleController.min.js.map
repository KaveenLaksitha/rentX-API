{"version":3,"sources":["vehicleController.js"],"names":["router","require","Router","Vehicle","uuidv4","route","post","req","res","OwnerName","body","OwnerNIC","TeleNo","Address","Email","VehicleRegNo","VehicleModel","VehicleType","VehicleBrand","Mileage","InsType","InsComName","Transmission","AirC","NoOfSeats","RatePDay","YearsRent","vehPic","vehDoc","newVehicle","json","save","then","err","log","get","console","params","find","model","Vehicles","findOne","vehicle","trim","$regex","val","$options","vehicles","val1","values","length","from","Set","a","Array","split","toString","exports","module"],"mappings":"aAAA,IAAMA,OAASC,QAAQ,WAAWC,SAC9BC,QAAUF,QAAQ,kCADCA,QAAR,QAAHG,gBAANJ,GAUNA,OAAOK,MAAM,eAAeC,KAAK,SAAAC,EAAAC,GAG7B,IAAMC,EAAgBC,SAChBC,EAAeD,EAAKC,KAAAA,UACpBC,EAAaF,EAAKE,KAAxBD,SACME,EAAaN,EAACG,KAAKG,OACnBC,EAAYJ,EAAKI,KAAvBD,QACME,EAAYR,EAAGA,KAAIG,MACnBM,EAAmBN,EAAJA,KAASM,aACxBC,EAAkBP,EAAKO,KAAAA,aACvBC,EAAkBX,EAACG,KAAKQ,YACxBC,EAAmBA,EAAAA,KAAzBD,aACME,EAAcV,EAAJA,KAASU,QACnBC,EAAad,EAAIG,KAAKW,QACtBC,EAAef,EAAIG,KAAKY,WACpBA,EAAYC,EAAtBb,KAAAY,aACME,EAASjB,EAAMG,KAAHa,KACZE,EAAef,EAAKe,KAAAA,UACpBC,EAAenB,EAACG,KAAKgB,SACrBC,EAAajB,EAAKiB,KAAxBD,UACME,EAAalB,EAAJA,KAASkB,OAElBC,EAAatB,EAAIJ,KAAAA,OAGnBM,IAH2BN,QAAA,CAK3BS,UAAAA,EACAC,UAAAA,EACAC,SAAAA,EACAC,OAAAA,EACAC,QAAAA,EACAC,MAAAA,EACAC,aAAAA,EACAC,aAAAA,EACAC,YAAAA,EACAC,aAAAA,EACAC,QAAAA,EACIF,QAAAA,EACJI,WAAAA,EACAC,aAAAA,EACAC,KAAAA,EACAC,UAAAA,EACAC,SAAAA,EArBJF,UAAAA,EAyBAG,OAAAA,EACQC,OAAAA,IAQZC,OAAAC,KAAA,WARQxB,EAAIsB,KAAK,mBAQjB,MAEI,SAAYG,GACZ9B,QAAA+B,IAAeF,OAQnBhC,OAAOK,MAAM,SAAA8B,IAAA,SAAA5B,EAAAC,GAET4B,QAAU7B,IAAI8B,YACdlC,QAAQmC,OAAOD,KAAOE,SAAAA,GAVlB/B,EAAIsB,KAAKU,KAUb,MAIQF,SAARL,GAAehB,QAAWiB,IAAED,OACxBjC,OAAAK,MAAA,4CAAA8B,IAAA,SAAA5B,EAAAC,GAEIL,IAAAA,EAAQsC,EAAAA,OAAQC,QAAAC,OAAE3B,EAAAA,EAAAA,OAAcuB,MAAAI,OAAhBxC,QAAgE6B,KAAK,CAAAf,YAAA,CAAc2B,OAAA,KAAAC,EAAA,KAAAC,SAAA,OAAAd,KAAA,SAAAe,GAIxF,MAJXA,GAKQX,QAAYH,QAAZ,CAAAjB,aAAA,CAAA4B,OAAA,IAAAI,EAAA,KAAAF,SAAA,OAAAd,KAAA,SAAAe,GALRvC,EAAAsB,KAAAiB,EAAAtB,YAKQW,MAMZ,SAAAH,GAdJG,QAAAF,IAAAD,OAGwB,MAsBhBK,SAARL,GAAehB,QAAWiB,IAAED,OAExBjC,OAAAK,MAAI4C,iCAAJd,IAAA,SAAA5B,EAAAC,GACA,IAAAqC,EAAUtC,EAAV8B,OAAoBK,QAAQQ,OAHhC/C,QAAQmC,KAAK,CAAErB,YAAa,CAAE2B,OAAQ,KAAOC,EAAM,KAAMC,SAAU,OAASd,KAAK,SAACU,GAM/DS,EAASC,OAN5B,IAMIH,IACAA,EAAA,GAEKI,EAAA,EAACpB,EAADS,EAASQ,OAAAG,IACNnB,GAARQ,EAAAW,GAAArC,aAAA,IAfRiC,EAAAK,MAAAH,KAAA,IAAAC,IAAAH,EAAAM,MAAA,OAAAC,WAyBOC,EAAAA,KAAUzD,KApBb,MASS,SAACiC,GACNG,QAAQF,IAAID,OAUpByB,OAAOD,QAAUzD","file":"vehicleController.min.js","sourcesContent":["const router = require(\"express\").Router();\r\nlet Vehicle = require(\"../model/vehicleModel\");\r\nconst { v4: uuidv4 } = require(\"uuid\");\r\n\r\n\r\n\r\n\r\n\r\n//add vehicle\r\n\r\nrouter.route(\"/addVehicle\").post((req, res) => {\r\n\r\n    const VehicleID = uuidv4();\r\n    const OwnerName = req.body.OwnerName;\r\n    const OwnerNIC = req.body.OwnerNIC;\r\n    const TeleNo = req.body.TeleNo;\r\n    const Address = req.body.Address;\r\n    const Email = req.body.Email;\r\n    const VehicleRegNo = req.body.VehicleRegNo;\r\n    const VehicleModel = req.body.VehicleModel;\r\n    const VehicleType = req.body.VehicleType;\r\n    const VehicleBrand = req.body.VehicleBrand;\r\n    const Mileage = req.body.Mileage;\r\n    const InsType = req.body.InsType;\r\n    const InsComName = req.body.InsComName;\r\n    const Transmission = req.body.Transmission;\r\n    const AirC = req.body.AirC;\r\n    const NoOfSeats = req.body.NoOfSeats;\r\n    const RatePDay = req.body.RatePDay;\r\n    const YearsRent = req.body.YearsRent;\r\n    const vehPic = req.body.vehPic;\r\n    const vehDoc = req.body.vehDoc;\r\n\r\n    const newVehicle = new Vehicle({\r\n\r\n        VehicleID,\r\n        OwnerName,\r\n        OwnerNIC,\r\n        TeleNo,\r\n        Address,\r\n        Email,\r\n        VehicleRegNo,\r\n        VehicleModel,\r\n        VehicleType,\r\n        VehicleBrand,\r\n        Mileage,\r\n        InsType,\r\n        InsComName,\r\n        Transmission,\r\n        AirC,\r\n        NoOfSeats,\r\n        RatePDay,\r\n        YearsRent,\r\n        vehPic,\r\n        vehDoc\r\n    })\r\n\r\n\r\n    newVehicle.save().then(() => {\r\n        res.json(\"Vehicle added\");\r\n\r\n    }).catch((err) => {\r\n        console.log(err);\r\n    })\r\n\r\n})\r\n\r\n//view data vehicle\r\nrouter.route(\"/view\").get((req, res) => {\r\n    console.log(\"view all\");\r\n    Vehicle.find().then((Vehicles) => {\r\n        res.json(Vehicles)\r\n    }).catch((err) => {\r\n        console.log(err)\r\n    })\r\n})\r\n\r\n\r\nrouter.route(\"/searchPerDayRentalPrice/:vehicle/:model\").get((req, res) => {\r\n\r\n    let val = req.params.vehicle.trim();\r\n    let val1 = req.params.model.trim();\r\n\r\n\r\n    //{$regex: \"^\" + val + \".*\"}this will get to the value starting at the begining of list \r\n    Vehicle.find({ VehicleType: { $regex: \".*\" + val + \".*\", $options: 'i' } }).then((vehicles) => {\r\n        //res.json(rentals)\r\n        if (vehicles != null) {\r\n            Vehicle.findOne({ VehicleModel: { $regex: \"^\" + val1 + \".*\", $options: 'i' } }).then((vehicles) => {\r\n                res.json(vehicles.RatePDay);\r\n\r\n            })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n\r\n                })\r\n        }\r\n\r\n    }).catch((err) => {\r\n        console.log(err);\r\n    })\r\n\r\n\r\n})\r\n\r\nrouter.route(\"/searchVehicleModels/:vehicle\").get((req, res) => {\r\n\r\n    let val = req.params.vehicle.trim();\r\n\r\n    //{$regex: \".*\" + val + \".*\"}this will get to the value anywhere in the list not just begining\r\n    Vehicle.find({ VehicleType: { $regex: \".*\" + val + \".*\", $options: 'i' } }).then((vehicle) => {\r\n        var length = vehicle.length;\r\n        let values = \"\";\r\n        for (var a = 0; a < vehicle.length; a++) {\r\n            values += vehicle[a].VehicleModel + \",\";\r\n        }\r\n        values = Array.from(new Set(values.split(','))).toString();\r\n        res.json(values);\r\n\r\n    }).catch((err) => {\r\n        console.log(err);\r\n    })\r\n\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\nmodule.exports = router;"]}