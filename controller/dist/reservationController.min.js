"use strict";var controller=require("express").Router(),Reservation=require("../model/reservationModel"),_require=require("uuid"),uuidv4=_require.v4,_require2=require("express"),Router=_require2.Router,isMoment=require("moment");controller.route("/addReservation").post(function(e,t){var r=uuidv4(),n=e.body.customername,s=Number(e.body.contactnumber),o=e.body.nic,a=e.body.customeraddress,u=e.body.packagename,i=e.body.eventtype,c=isMoment(e.body.from).format("MM-DD-YYYY"),d=isMoment(e.body.to).format("MM-DD-YYYY"),m=Number(e.body.discount),v=Number(e.body.advancedpayment),l=Number(e.body.totalreservation),R=e.body.status;new Reservation({reservationid:r,customername:n,contactnumber:s,nic:o,customeraddress:a,packagename:u,eventtype:i,from:c,to:d,discount:m,advancedpayment:v,totalreservation:l,status:R}).save().then(function(){t.status(200).send({message:"Reservation insert successfully"})}).catch(function(e){t.status(300).send({status:"Error Reservation insertion",error:e.message})})}),controller.route("/displayReservation").get(function(e,t){Reservation.find().then(function(e){t.json(e)}).catch(function(e){console.log(e)})}),controller.route("/getReservation/:RID").get(function(t,r){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.RID,e.next=3,regeneratorRuntime.awrap(Reservation.findOne({reservationid:n}).then(function(e){null!=e?r.status(200).send({status:"Reservation fetched",reservation:e}):r.status(500).send({status:"Error with get Reservation",error:err.message})}).catch(function(e){console.log(e.message),r.status(500).send({status:"Error with get Reservation",error:e.message})}));case 3:e.sent;case 4:case"end":return e.stop()}})}),controller.route("/deleteReservation/:RID").delete(function(t,r){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.RID,e.next=3,regeneratorRuntime.awrap(Reservation.findOneAndDelete({reservationid:n}).then(function(e){null!=e?r.status(200).send({status:"Reservation deleted"}):r.status(500).send({status:"Error with delete Reservation",error:err.message})}).catch(function(e){console.log(e),r.status(500).send({status:"Error with delete Reservation",error:e.message})}));case 3:e.sent;case 4:case"end":return e.stop()}})}),controller.route("/updateReservation/:RID").put(function(t,r){var n,s,o,a,u,i,c,d,m,v,l,R,p,f,g;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.RID,s=t.body,s.reservationid,o=s.customername,a=s.contactnumber,u=s.nic,i=s.customeraddress,c=s.packagename,d=s.eventtype,m=s.from,v=s.to,l=s.discount,R=s.advancedpayment,p=s.totalreservation,f=s.status,g={customername:o,contactnumber:a,nic:u,customeraddress:i,packagename:c,eventtype:d,from:m,to:v,discount:l,advancedpayment:R,totalreservation:p,status:f},e.next=5,regeneratorRuntime.awrap(Reservation.findOneAndUpdate({reservationid:n},g).then(function(e){null!=e?r.status(200).send({status:"Reservation updated"}):r.status(500).send({status:"Error with updating Reservation",error:err.message})}).catch(function(e){console.log(e),r.status(500).send({status:"Error with delete Reservation",error:e.message})}));case 5:e.sent;case 6:case"end":return e.stop()}})}),module.exports=controller;
//# sourceMappingURL=reservationController.min.js.map
