"use strict";var router=require("express").Router(),Vehicle=require("../model/vehicleModel"),_require=require("uuid"),uuidv4=_require.v4;router.route("/addVehicle").post(function(e,o){var i=uuidv4(),n=e.body.OwnerName,c=e.body.OwnerNIC,r=e.body.TeleNo,t=e.body.Address,l=e.body.Email,a=e.body.VehicleRegNo,h=e.body.VehicleModel,s=e.body.VehicleType,d=e.body.VehicleBrand,u=e.body.Mileage,y=e.body.InsType,f=e.body.InsComName,m=e.body.Transmission,V=e.body.AirC,g=e.body.NoOfSeats,v=e.body.RatePDay,p=e.body.YearsRent,b=e.body.vehPic,N=e.body.vehDoc;new Vehicle({VehicleID:i,OwnerName:n,OwnerNIC:c,TeleNo:r,Address:t,Email:l,VehicleRegNo:a,VehicleModel:h,VehicleType:s,VehicleBrand:d,Mileage:u,InsType:y,InsComName:f,Transmission:m,AirC:V,NoOfSeats:g,RatePDay:v,YearsRent:p,vehPic:b,vehDoc:N}).save().then(function(){o.json("Vehicle added")}).catch(function(e){console.log(e)})}),router.route("/view").get(function(e,o){console.log("view all"),Vehicle.find().then(function(e){o.json(e)}).catch(function(e){console.log(e)})}),router.route("/searchPerDayRentalPrice/:vehicle/:model").get(function(e,o){var i=e.params.vehicle.trim(),n=e.params.model.trim();Vehicle.find({VehicleType:{$regex:".*"+i+".*",$options:"i"}}).then(function(e){null!=e&&Vehicle.findOne({VehicleModel:{$regex:"^"+n+".*",$options:"i"}}).then(function(e){o.json(e.RatePDay)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}),router.route("/searchVehicleModels/:vehicle").get(function(e,n){var o=e.params.vehicle.trim();Vehicle.find({VehicleType:{$regex:".*"+o+".*",$options:"i"}}).then(function(e){e.length;for(var o="",i=0;i<e.length;i++)o+=e[i].VehicleModel+",";o=Array.from(new Set(o.split(","))).toString(),n.json(o)}).catch(function(e){console.log(e)})}),router.route("/searchPerDayRentalPrice/:vehicle1/:model1").get(function(e,o){var i=e.params.vehicle.trim(),n=e.params.model.trim();Vehicle.find({VehicleType:{$regex:".*"+i+".*",$options:"i"}}).then(function(e){null!=e&&Vehicle.findOne({VehicleModel:{$regex:"^"+n+".*",$options:"i"}}).then(function(e){o.json(e.RatePDay)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}),module.exports=router;
//# sourceMappingURL=vehicleController.min.js.map
