"use strict";var router=require("express").Router(),Vehicle=require("../model/vehicleModel"),_require=require("uuid"),uuidv4=_require.v4;router.route("/addVehicle").post(function(e,o){var i=uuidv4(),n=e.body.OwnerName,r=e.body.OwnerNIC,c=e.body.TeleNo,l=e.body.Address,t=e.body.Email,a=e.body.VehicleRegNo,d=e.body.VehicleModel,h=e.body.VehicleType,s=e.body.VehicleBrand,u=e.body.Mileage,y=e.body.InsType,f=e.body.InsComName,V=e.body.Transmission,m=e.body.AirC,v=e.body.NoOfSeats,b=e.body.RatePDay,g=e.body.YearsRent,p=e.body.vehPic,N=e.body.vehDoc;new Vehicle({VehicleID:i,OwnerName:n,OwnerNIC:r,TeleNo:c,Address:l,Email:t,VehicleRegNo:a,VehicleModel:d,VehicleType:h,VehicleBrand:s,Mileage:u,InsType:y,InsComName:f,Transmission:V,AirC:m,NoOfSeats:v,RatePDay:b,YearsRent:g,vehPic:p,vehDoc:N}).save().then(function(){o.json("Vehicle added")}).catch(function(e){console.log(e)})}),router.route("/view").get(function(e,o){console.log("view all"),Vehicle.find().then(function(e){o.json(e)}).catch(function(e){console.log(e)})}),router.route("/searchPerDayRentalPrice/:vehicle/:model").get(function(e,o){var i=e.params.vehicle.trim(),n=e.params.model.trim();Vehicle.find({VehicleType:{$regex:".*"+i+".*",$options:"i"}}).then(function(e){null!=e&&Vehicle.findOne({VehicleModel:{$regex:"^"+n+".*",$options:"i"}}).then(function(e){o.json(e.RatePDay)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}),router.route("/searchVehicleModels/:vehicle").get(function(e,n){var o=e.params.vehicle.trim();Vehicle.find({VehicleType:{$regex:".*"+o+".*",$options:"i"}}).then(function(e){e.length;for(var o="",i=0;i<e.length;i++)o+=e[i].VehicleModel+",";o=Array.from(new Set(o.split(","))).toString(),n.json(o)}).catch(function(e){console.log(e)})}),module.exports=router;
//# sourceMappingURL=vehicleController.min.js.map
