{"version":3,"sources":["vehicleController.js"],"names":["router","require","Router","Vehicle","uuidv4","v4","route","post","req","res","VehicleID","OwnerName","body","OwnerNIC","TeleNo","Address","Email","VehicleRegNo","VehicleModel","VehicleType","VehicleBrand","Mileage","InsType","InsComName","Transmission","AirC","NoOfSeats","RatePDay","YearsRent","vehPic","vehDoc","newVehicle","save","then","json","err","console","log","get","find","Vehicles","val","params","vehicle","trim","val1","model","$regex","$options","vehicles","findOne","length","values","a","Array","from","Set","split","toString","module","exports"],"mappings":"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","sourcesContent":["const router = require(\"express\").Router();\r\nlet Vehicle = require(\"../model/vehicleModel\");\r\nconst { v4: uuidv4 } = require(\"uuid\");\r\n\r\n\r\n\r\n\r\n\r\n//add vehicle\r\n\r\nrouter.route(\"/addVehicle\").post((req, res) => {\r\n\r\n    const VehicleID = uuidv4();\r\n    const OwnerName = req.body.OwnerName;\r\n    const OwnerNIC = req.body.OwnerNIC;\r\n    const TeleNo = req.body.TeleNo;\r\n    const Address = req.body.Address;\r\n    const Email = req.body.Email;\r\n    const VehicleRegNo = req.body.VehicleRegNo;\r\n    const VehicleModel = req.body.VehicleModel;\r\n    const VehicleType = req.body.VehicleType;\r\n    const VehicleBrand = req.body.VehicleBrand;\r\n    const Mileage = req.body.Mileage;\r\n    const InsType = req.body.InsType;\r\n    const InsComName = req.body.InsComName;\r\n    const Transmission = req.body.Transmission;\r\n    const AirC = req.body.AirC;\r\n    const NoOfSeats = req.body.NoOfSeats;\r\n    const RatePDay = req.body.RatePDay;\r\n    const YearsRent = req.body.YearsRent;\r\n    const vehPic = req.body.vehPic;\r\n    const vehDoc = req.body.vehDoc;\r\n\r\n    const newVehicle = new Vehicle({\r\n\r\n        VehicleID,\r\n        OwnerName,\r\n        OwnerNIC,\r\n        TeleNo,\r\n        Address,\r\n        Email,\r\n        VehicleRegNo,\r\n        VehicleModel,\r\n        VehicleType,\r\n        VehicleBrand,\r\n        Mileage,\r\n        InsType,\r\n        InsComName,\r\n        Transmission,\r\n        AirC,\r\n        NoOfSeats,\r\n        RatePDay,\r\n        YearsRent,\r\n        vehPic,\r\n        vehDoc\r\n    })\r\n\r\n\r\n    newVehicle.save().then(() => {\r\n        res.json(\"Vehicle added\");\r\n\r\n    }).catch((err) => {\r\n        console.log(err);\r\n    })\r\n\r\n})\r\n\r\n//view data vehicle\r\nrouter.route(\"/view\").get((req, res) => {\r\n    console.log(\"view all\");\r\n    Vehicle.find().then((Vehicles) => {\r\n        res.json(Vehicles)\r\n    }).catch((err) => {\r\n        console.log(err)\r\n    })\r\n})\r\n\r\n\r\nrouter.route(\"/searchPerDayRentalPrice/:vehicle/:model\").get((req, res) => {\r\n\r\n    let val = req.params.vehicle.trim();\r\n    let val1 = req.params.model.trim();\r\n\r\n\r\n    //{$regex: \"^\" + val + \".*\"}this will get to the value starting at the begining of list \r\n    Vehicle.find({ VehicleType: { $regex: \".*\" + val + \".*\", $options: 'i' } }).then((vehicles) => {\r\n        //res.json(rentals)\r\n        if (vehicles != null) {\r\n            Vehicle.findOne({ VehicleModel: { $regex: \"^\" + val1 + \".*\", $options: 'i' } }).then((vehicles) => {\r\n                res.json(vehicles.RatePDay);\r\n\r\n            })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n\r\n                })\r\n        }\r\n\r\n    }).catch((err) => {\r\n        console.log(err);\r\n    })\r\n\r\n\r\n})\r\n\r\nrouter.route(\"/searchVehicleModels/:vehicle\").get((req, res) => {\r\n\r\n    let val = req.params.vehicle.trim();\r\n\r\n    //{$regex: \".*\" + val + \".*\"}this will get to the value anywhere in the list not just begining\r\n    Vehicle.find({ VehicleType: { $regex: \".*\" + val + \".*\", $options: 'i' } }).then((vehicle) => {\r\n        var length = vehicle.length;\r\n        let values = \"\";\r\n        for (var a = 0; a < vehicle.length; a++) {\r\n            values += vehicle[a].VehicleModel + \",\";\r\n        }\r\n        values = Array.from(new Set(values.split(','))).toString();\r\n        res.json(values);\r\n\r\n    }).catch((err) => {\r\n        console.log(err);\r\n    })\r\n\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\nmodule.exports = router;"],"file":"vehicleController.dev.js"}